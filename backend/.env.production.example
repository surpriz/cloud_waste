# =====================================================
# CloudWaste - Production Environment Configuration
# =====================================================
#
# ⚠️  CRITICAL SECURITY NOTES:
# - NEVER commit this file with real secrets to git
# - Replace ALL placeholder values before deployment
# - Store real secrets in secure secret manager (AWS Secrets Manager, HashiCorp Vault, etc.)
# - Backup ENCRYPTION_KEY securely (data is unrecoverable if lost)
# - Use HTTPS for all external origins
# - Enable monitoring and alerting
#
# =====================================================

# Application Configuration
APP_NAME=CloudWaste
APP_ENV=production
DEBUG=false
SECRET_KEY=CHANGE-ME-TO-RANDOM-64-CHARACTER-STRING-IN-PRODUCTION
API_V1_PREFIX=/api/v1

# Security - Encryption & JWT
# ⚠️  CRITICAL: Generate with: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
ENCRYPTION_KEY=CHANGE-ME-TO-FERNET-KEY-BASE64-ENCODED-44-CHARACTERS
JWT_SECRET_KEY=CHANGE-ME-TO-RANDOM-256-BIT-SECRET-KEY-IN-PRODUCTION
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
REFRESH_TOKEN_REMEMBER_ME_EXPIRE_DAYS=30

# Database - Production (PostgreSQL)
# Replace with actual production database credentials
DATABASE_URL=postgresql+asyncpg://cloudwaste_user:STRONG_PASSWORD@db-production.example.com:5432/cloudwaste_prod

# Redis - Production
# Replace with actual production Redis instance
REDIS_URL=redis://:REDIS_PASSWORD@redis-production.example.com:6379/0

# Celery - Background Jobs
CELERY_BROKER_URL=redis://:REDIS_PASSWORD@redis-production.example.com:6379/0
CELERY_RESULT_BACKEND=redis://:REDIS_PASSWORD@redis-production.example.com:6379/0

# CORS Configuration - PRODUCTION
# ⚠️  SECURITY: Only add trusted HTTPS domains (no wildcards, no HTTP except localhost)
# Format: https://domain.com (must include https://)
# Separate multiple origins with commas
ALLOWED_ORIGINS=https://cloudwaste.com,https://www.cloudwaste.com,https://app.cloudwaste.com
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=600

# Email Configuration - Production SMTP
# Use production SMTP service (SendGrid, AWS SES, Mailgun, etc.)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=YOUR-SENDGRID-API-KEY
EMAILS_FROM_EMAIL=noreply@cloudwaste.com
EMAILS_FROM_NAME=CloudWaste

# Email Verification
EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=168
UNVERIFIED_ACCOUNT_CLEANUP_DAYS=14
FRONTEND_URL=https://cloudwaste.com

# AWS Configuration (Optional - for testing cloud provider features)
# ⚠️  Use IAM role or instance profile in production instead of hardcoded keys
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-west-1

# AWS SES Configuration (Optional - for email analytics)
AWS_SES_REGION=eu-north-1
AWS_SES_ACCESS_KEY_ID=
AWS_SES_SECRET_ACCESS_KEY=

# AI Assistant (Anthropic) - Production
# Get API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
CHAT_MAX_MESSAGES_PER_USER_PER_DAY=50
CHAT_CONTEXT_MAX_RESOURCES=20
CHAT_MODEL=claude-haiku-4-5-20250818

# Rate Limiting Configuration - Production
# Stricter limits for production environment
RATE_LIMIT_ENABLED=true

# Authentication endpoints (critical - prevent brute-force)
RATE_LIMIT_AUTH_LOGIN=5/minute
RATE_LIMIT_AUTH_REGISTER=3/minute
RATE_LIMIT_AUTH_REFRESH=10/minute

# Resource-intensive operations
RATE_LIMIT_SCANS=50/minute

# Admin endpoints
RATE_LIMIT_ADMIN=50/minute

# Default limit for all API endpoints
RATE_LIMIT_API_DEFAULT=100/minute

# =====================================================
# Production Deployment Checklist
# =====================================================
#
# Before deploying to production:
#
# ✅ Security:
#    - [ ] Replace all CHANGE-ME placeholders with real secrets
#    - [ ] Generate unique ENCRYPTION_KEY (never reuse from dev)
#    - [ ] Generate unique JWT_SECRET_KEY (never reuse from dev)
#    - [ ] ALLOWED_ORIGINS contains only HTTPS domains (except localhost for testing)
#    - [ ] No wildcards (*) in ALLOWED_ORIGINS
#    - [ ] SMTP credentials configured for production email service
#    - [ ] FRONTEND_URL points to production domain (https://)
#
# ✅ Database:
#    - [ ] Production PostgreSQL instance configured
#    - [ ] Database backups automated
#    - [ ] Connection pooling enabled
#    - [ ] SSL/TLS enabled for database connections
#
# ✅ Redis:
#    - [ ] Production Redis instance configured
#    - [ ] Redis password set (not empty)
#    - [ ] Redis persistence enabled (AOF or RDB)
#
# ✅ Monitoring:
#    - [ ] Sentry or error tracking configured
#    - [ ] Log aggregation setup (ELK, Loki, CloudWatch)
#    - [ ] Alerting configured for critical errors
#    - [ ] Health check endpoint monitored
#
# ✅ CORS:
#    - [ ] Only trusted domains in ALLOWED_ORIGINS
#    - [ ] All origins use HTTPS (except localhost)
#    - [ ] CORS logging enabled
#    - [ ] Test cross-origin requests work correctly
#
# ✅ Infrastructure:
#    - [ ] HTTPS/TLS configured (SSL certificates)
#    - [ ] Firewall rules configured
#    - [ ] Reverse proxy (nginx) configured
#    - [ ] Docker secrets used for sensitive data
#    - [ ] Environment variables not exposed in logs
#
# ✅ Testing:
#    - [ ] All tests passing (pytest)
#    - [ ] Load testing completed
#    - [ ] Security scan completed (OWASP ZAP, etc.)
#    - [ ] Manual testing in staging environment
#
# =====================================================
